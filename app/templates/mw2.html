<% extends "head.html" %>
<% block content %>

<!-- jsPanel CSS -->
<link href="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/jspanel.css" rel="stylesheet">
<!-- jsPanel JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/jspanel.js"></script>

<!-- optional jsPanel extensions -->
<script src="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/modal/jspanel.modal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/tooltip/jspanel.tooltip.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/hint/jspanel.hint.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/layout/jspanel.layout.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/contextmenu/jspanel.contextmenu.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/dock/jspanel.dock.js"></script>

<div id="app">
  <b-button size="lg" id="openMenu" @click="openMenu" class="mt-3 ml-3"><i class="fas fa-bars"></i></b-button>

  <b-img src="https://free-materials.com/adm/wp-content/uploads/2020/10/logo_07-1024x1024.png"
  style="width: 400; " center ></b-img>
  
</div>

<script>
    var app = new Vue({
        el: '#app',
        data: {
          item:[],
        },
        methods:{
          openMenu: function(){
            openMenu();
          }
        },
        mounted: function(){
          localStorage.setItem('wMode','mw');
          //menu();
        }
      });

</script>

<script>

let _left = 100;
let _top = 100;

function openMenu(){
  jsPanel.create({
          headerTitle: 'menu',
          panelSize: '300 700',
          contentSize: '300 700',
          position: 'left-top 0 0',
          contentOverflow: 'hidden',
          content: '<iframe src=/mw-menu width=100% height=100%><iframe>',
          callback: function(){
            $('iframe').on('load',function(){
              //  $(this).contents().on('click', function(){
                $(this).contents().find('#customer').on('click', function(){
                  openWindow('/customer-page','customer','customer')
                });
                $(this).contents().find('#item').on('click', function(){
                  openWindow('/item-page','item','item')
                });
                $(this).contents().find('#invoice').on('click', function(){
                  openWindow('/invoice-page','invoice','invoice')
                });
                $(this).contents().find('#quotation').on('click', function(){
                  openWindow('/quotation-page','quotation','quotation')
                });
                $(this).contents().find('#memo').on('click', function(){
                  openWindow('/memo-page','quotation','quotation')
                });
                $(this).contents().find('#logout').on('click', function(){
                  window.location.href = '/logout';
                });
            })
          }
  });
}

function openWindow(url,title,name){
  jsPanel.create({
    headerTitle: title,
    footerToolbar: '<span>footer</span>',
    borderRadius: '.5rem',
    contentOverflow: 'hidden hidden',
    panelSize: {
        width: () => window.innerWidth * 0.7,
        height: '70vh'
    },
    position: { 
        my: 'left-top',
        at: 'left-top',
//        of: '#A',
        autoposition: 'down',
        offsetY: '4px'
    },
    content: '<iframe src='+ url +' width=100% height=100%><iframe>',
  });
}

/*
      _left += 50; 
      _top += 50;
      if ( _left > 600 ) _left -= 400   
      if ( _top > 400 ) _top -= 300   

      frameDict[name] = frame;

    }
*/

openMenu();


</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<% endblock %>
